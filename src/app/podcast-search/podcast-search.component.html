<div class="podcast-search-container">
  <div class="app-header">
    <a [routerLink]="['/snips']" class="button fancy-button">
      My Snips
    </a>
  </div>

  <div class="search-form-wrapper">
    <form [formGroup]="searchForm" (ngSubmit)="onSubmit()" class="search-form">
      <div class="search-input-group">
        <label for="name">Podcast Search</label>
        <input
          id="name"
          type="text"
          formControlName="name"
          placeholder="Enter podcast name..."
          class="search-input"
          />
      </div>
      <button class="button search-button" type="submit">Search</button>
    </form>

    @if (errorMessage) {
      <div class="error-message">{{errorMessage}}</div>
    }

    @if (podcasts && podcasts.resultCount > 0) {
      <div class="results-summary">
        <span class="results-count">{{podcasts.resultCount}}</span> podcast{{podcasts.resultCount !== 1 ? 's' : ''}} found
      </div>
    }
  </div>

  @if (loading) {
    <div class="results-summary">Searching...</div>
  }

  @if (podcasts) {
    <div class="podcasts-grid">
      @for (result of podcasts.results; track result) {
        <div class="podcast-card">
          <a [routerLink]="['/episodes', result.collectionId]" class="podcast-link">
            <div class="podcast-image-wrapper">
              <img class="podcastImage" [src]="result.artworkUrl600" [alt]="result.collectionName">
            </div>
            <div class="podcast-info">
              <h3 class="podcast-title">{{result.collectionName}}</h3>
              <p class="podcast-artist">{{result.artistName}}</p>
            </div>
          </a>
        </div>
      }
    </div>
  }
</div>